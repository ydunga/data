<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel = "stylesheet" href = "taxshare.css">
    <script src="https://d3js.org/d3.v4.js"></script>
    <title>Document</title>
</head>
<body>
    <h1>Taxation in India</h1>
    <h3>Tax to GDP ratio compared to other countries</h3>
    <p>India's tax to GDP ratio currently stands at 11.9%. Compared to other developing countries, India's tax to GDP ratio is on the lower side.  </p>
    <p>In some developed countries with higher tax rates and high rates of compliance, the tax to GDP ratio is much higher. </p>
    <p>France has a tax to GDP ratio of 46%. </p>
    <div id = "my_dataviz"></div>
    <br>
    <h3>Tax to GDP ratio over time</h3>
    <p>Tax collections increase when households and businesses are doing well.</p>
    <p>Tax collections are highly cyclical, i.e they increase in boom times and decrease in busts. </p>
    <div id = "dataviz2"></div>
    <h3>Composition of tax revenue</h3>
    <p>Within tax revenue, collections fall into either direct on indirect taxes. </p>
    <p>Direct taxes consist of personal income tax and corporate tax, while indirect tax consists of excise duties and custom duties. </p>
    <div class = "container">
        <div id = "container-id1"></div>
        <div id = "container-id2"></div>
    </div>
    <h3>Current Income tax structure in India</h3>
    <p>India has a progressive income tax structure, meaning that the tax rates increase as we move to higher income brackets. </p>
    <svg width = "500" height = "300" >
       
        <text x= "280" y = "20" font-size = "15px">Annual income</text>
        <text x= "450" y = "20" font-size = "15px">Tax rate</text>
        <rect x = "50" y = "60" width = "30" height = "30" style = "fill: #c7d59f; stroke: black; stroke-width: 3px"></rect>
        <text x = "300" y = "70" font-size = "15px">0 - 2,50,000</text>
        <text x = "450" y = "70" font-size = "15px" >No tax</text>
        <rect x = "50" y = "90" width = "60" height = "30" style = "fill: #b7ce63; stroke: black;stroke-width: 3px"></rect>
        <text x = "300" y = "100" font-size = "15px">2,50,001 - 5,00,000 </text>
        <text x = "450" y = "100" font-size = "15px" >5%</text>
        <rect x = "50" y = "120" width = "90" height = "30" style = "fill: #8fb339; stroke: black;stroke-width: 3px"></rect>
        <text x = "300" y = "130" font-size = "15px">5,00,001 - 7,50,000 </text>
        <text x = "450" y = "130" font-size = "15px" >10%</text>
        <rect x = "50" y = "150" width = "120" height = "30" style = "fill: #41521f; stroke: black;stroke-width: 3px"></rect>
        <text x = "300" y = "165" font-size = "15px">7,50,001 - 10,00,000 </text>
        <text x = "450" y = "165" font-size = "15px" >15%</text>
        <rect x = "50" y = "180" width = "150" height = "30" style = "fill: #43aa8b; stroke: black;stroke-width: 3px"></rect>
        <text x = "300" y = "195" font-size = "15px">10,00,001 - 12,50,000 </text>
        <text x = "450" y = "195" font-size = "15px" >20%</text>
        <rect x = "50" y = "210" width = "180" height = "30" style = "fill: #577590; stroke: black;stroke-width: 3px"></rect>
        <text x = "300" y = "225" font-size = "15px">12,50,001 - 15,00,000 </text>
        <text x = "450" y = "225" font-size = "15px" >25%</text>
        <rect x = "50" y = "240" width = "210" height = "30" style = "fill: #277da1; stroke: black;stroke-width: 3px"></rect>
        <text x = "300" y = "260" font-size = "15px">15,00,001 and above </text>
        <text x = "450" y = "260" font-size = "15px" >30%</text>
    </svg>
    <h3>Minimum threshold to pay income tax vs per capita income</h3>
    <p>India is classified as a middle income country. The per capita income in local currency (Rupees) is Rs.1,48,855. In USD it is USD 2,098. in USD PPP it is 6,920 PPP Dollars.</p>
    <p>India is also a highly unequal country with a skewed income distribution. According to estimated by the World Inequality Database, closed to 40% of the country's pre-tax national income is owned by just 10% of the top income earners. </p>
    <p>High income individuals and households are thus taxed at the highest rate. </p>
    <p>Individuals and households with very low income levels are exempt from paying personal income tax. In India, agricultural income is also exempt from tax. </p>
    <p>Currently people who earn above Rs 10 lakh pay a 30% tax rate, while people who earn between Rs.2.5 lakh and rs.5 lakh pay a 5% tax rate.</p>
    <p>You can see how the threshold for paying the minimum and the maximum tax rate has changed over time. </p>
    <p>You can also see how the minimum and maximum tax rates have changed over time. </p>
    <div class = "container2">
        <div id = "container2-1"></div>
        <div id = "container2-2"></div>
    </div>
    <h3>Corporate tax</h3>
    <p>Corporate tax is the tax levied on the profits earned by corporates. </p>
    <p>Currently, India has a basic corporate tax rate of 30%. In addition to the base rate an educational and healthcare cess is also applied. </p>
<div id = "dataviz3"></div>
<p>Beyond personal income and corporate tax, there is excise tax and custom duties. </p>
<p>Excise duty has been subsumed into the Goods and Services Tax along with other indirect taxes, however it is still applied to certain products such as petroleum and liquor. </p>
<p>Custom duty is the tax that is imposed on goods when they are transported across international borders. </p>
<h3>GST structure</h3>
<p>Within the GST structure there are 5 slabs of tax. Essentials goods and services are exempt from tax, while everything else gets taxed according to the slab rate. </p>
<svg width = "500" height = "300">
    
        <text x= "300" y = "20" font-size = "15px">Tax rate</text>
        <rect x = "50" y = "60" width = "30" height = "30" style = "fill: #c7d59f; stroke: black; stroke-width: 3px"></rect>
        <text x = "300" y = "70" font-size = "15px">Exempted</text>
        <rect x = "50" y = "90" width = "60" height = "30" style = "fill: #b7ce63; stroke: black;stroke-width: 3px"></rect>
        <text x = "300" y = "100" font-size = "15px">5% </text>
        <rect x = "50" y = "120" width = "90" height = "30" style = "fill: #8fb339; stroke: black;stroke-width: 3px"></rect>
        <text x = "300" y = "130" font-size = "15px">12% </text>
        <rect x = "50" y = "150" width = "120" height = "30" style = "fill: #41521f; stroke: black;stroke-width: 3px"></rect>
        <text x = "300" y = "165" font-size = "15px">18% </text>
        <rect x = "50" y = "180" width = "150" height = "30" style = "fill: #43aa8b; stroke: black;stroke-width: 3px"></rect>
        <text x = "300" y = "195" font-size = "15px">28% </text>

</svg>
<p>Custom duty is applied to imports and exports on an ad valorem basis, i.e the tax depends on the value of the good.  </p>
    
  <p>Tax revenue + non tax revenue (interest receipts) make the revenue receipts of the government. </p>
  <p>Currently, the government of India runs a revenue deficit of 2.5% of GDP. </p>
  <p>This means revenue expenditure exceeds revenue reciepts by 2.5% of GDP. </p>
    <div id = "revdeficit"></div>
    
    <script>
        var margin = {top: 30, right: 30, bottom: 70, left: 60},
    width = 500 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

// append the svg object to the body of the page
var svg = d3.select("#my_dataviz")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");



// Parse the Data
d3.csv("https://raw.githubusercontent.com/ydunga/data/main/taxshare.csv", function(data) {
data.sort(function(b,a) {
    return a.taxshare - b.taxshare;
})
// X axis
var x = d3.scaleBand()
  .range([ 0, width ])
  .domain(data.map(function(d) { return d.CountryName; }))
  .padding(0.2);
svg.append("g")
  .attr("transform", "translate(0," + height + ")")
  .call(d3.axisBottom(x))
  .selectAll("text")
    .attr("transform", "translate(-10,0)rotate(-45)")
    .style("text-anchor", "end");

 svg.append("text")
  .text("Tax % GDP")
  .attr("x", width/2)
  .attr("font-style", "italic");
// Add Y axis
var y = d3.scaleLinear()
  .domain([0, 50])
  .range([ height, 0]);
svg.append("g")
  .call(d3.axisLeft(y));


// Bars
svg.selectAll("mybar")
  .data(data)
  .enter()
  .append("rect")
    .attr("x", function(d) { return x(d.CountryName); })
    .attr("width", x.bandwidth())
    .attr("fill", function (d) {
        if (d.CountryName == "India") {return "red";}
        else {return "#90be6d"}
    })
    .attr("stroke", "black")
    .attr("height", function(d) { return height - y(0); }) // always equal to 0
    .attr("y", function(d) { return y(0); });


    
    
    svg.selectAll("rect")
  .transition()
  .duration(300)
  .attr("y", function(d) { return y(d.taxshare); })
  .attr("height", function(d) { return height - y(d.taxshare); })
  .delay(function(d,i){console.log(i) ; return(i*100)});

});

var svg2 = d3.select("#dataviz2")
.append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");

d3.csv("https://raw.githubusercontent.com/ydunga/data/main/taxshareindia.csv", 
function(d) {
    return { date : d3.timeParse("%d/%m/%Y")(d.date), value : d.value }
},

function(data) {

// Add X axis --> it is a date format
var x = d3.scaleTime()
  .domain(d3.extent(data, function(d) { return d.date; }))
  .range([ 0, width ]);
svg2.append("g")
  .attr("transform", "translate(0," + height + ")")
  .call(d3.axisBottom(x));

// Add Y axis
var y = d3.scaleLinear()
  .domain([7, d3.max(data, function(d) { return +d.value; })])
  .range([ height, 0 ]);
svg2.append("g")
  .call(d3.axisLeft(y));

// Add the line
svg2.append("path")
  .datum(data)
  .attr("fill", "none")
  .attr("stroke", "#90be6d")
  .attr("stroke-width", 3)
  
  .attr("d", d3.line()
    .x(function(d) { return x(d.date) })
    .y(function(d) { return y(d.value) })
    );

svg2.append("text")
.text("Tax % GDP over time")
.attr("font-style", "italic")
.attr("x", width/3)
.attr("y", 0 - (margin.top / 2));



});

var svg3 = d3.select("#container-id1")
.append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height+ margin.top+margin.bottom)
.append("g")
.attr("transform", 
"translate("+margin.left + "," + margin.top + ")");

d3.csv("https://raw.githubusercontent.com/ydunga/data/main/taxrev.csv", 
function(d) {
    return { date : d3.timeParse("%d/%m/%Y")(d.Year), value: d.Tax}
},

function (data) { 
    var x = d3.scaleTime()
      .domain(d3.extent(data, function(d) { return d.date; }))
      .range([ 0, width ]);
    svg3.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x));

    // Add Y axis
    var y = d3.scaleLinear()
      .domain([0, d3.max(data, function(d) { return +d.value; })])
      .range([ height, 0 ]);
    svg3.append("g")
      .call(d3.axisLeft(y));

    // Add the line
    svg3.append("path")
      .datum(data)
      .attr("fill", "none")
      .attr("stroke", "#90be6d")
      .attr("stroke-width", 3)
      .attr("d", d3.line()
        .x(function(d) { return x(d.date) })
        .y(function(d) { return y(d.value) })
        )

        svg3.append("text")
.text("Tax revenue : Direct + Indirect taxes")
.attr("x", width/5)
.attr("y", 0 - (margin.top / 2))
.attr("font-style", "italic");

});

var svg4 = d3.select("#container-id2")
.append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height+ margin.top+margin.bottom)
.append("g")
.attr("transform", 
"translate("+margin.left + "," + margin.top + ")");


d3.csv("https://raw.githubusercontent.com/ydunga/data/main/directindirecttake2.csv", 

function(d) {
    return { date : d3.timeParse("%d/%m/%Y")(d.Year), direct: d.direct, indirect: d.indirect}
},

function(data) { 
    console.log(data)

    var subgroups = data.columns.slice(1)

    var groups = d3.map(data,function(d) { return (d.Year)}).keys()

    var x = d3.scaleTime()
      .domain(d3.extent(data, function(d) { return d.date; }))
      .range([ 0, width ])
    svg4.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x));

  // Add Y axis
  var y = d3.scaleLinear()
    .domain([0, 1])
    .range([ height, 0 ]);
  svg4.append("g")
    .call(d3.axisLeft(y));

  // color palette = one color per subgroup
  var color = d3.scaleOrdinal()
    .domain(subgroups)
    .range(['#f9c74f','#43aa8b'])

    var stackedData = d3.stack()
    .keys(subgroups)
    (data)

    svg4.append("g")
    .selectAll("g")
    // Enter in the stack data = loop key per key = group per group
    .data(stackedData)
    .enter().append("g")
      .attr("fill", function(d) { return color(d.key); })
      .attr("stroke", "black")
      .selectAll("rect")
      // enter a second time = loop subgroup per subgroup to add all rectangles
      .data(function(d) { return d; })
      .enter().append("rect")
        .attr("x", function(d) { return x(d.data.date); })
        .attr("y", function(d) { return y(d[1]); })
        .attr("height", function(d) { return y(d[0]) - y(d[1]); })
        .attr("width", 5)

        svg4.append("text")
.text("Share of direct and indirect tax in total tax revenue")
.attr("x", width/7)
.attr("y", 0 - (margin.top / 2))
.attr("font-style", "italic");

svg4.append("circle").attr("cx", 100).attr("cy", 440).attr("r", 5).style("fill", "#f9c74f").style("stroke", "black")
svg4.append("circle").attr("cx", 300).attr("cy", 440).attr("r", 5).style("fill", "#43aa8b").style("stroke", "black");
svg4.append("text").attr("x", 70).attr("y", 460).text("Direct taxes").style("font-size", "15px").attr("alignment-baseline","middle")
svg4.append("text").attr("x", 260).attr("y", 460).text("Indirect taxes").style("font-size", "15px").attr("alignment-baseline","middle")




})

var svg5 = d3.select("#container2-1")
.append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height+ margin.top+margin.bottom)
.append("g")
.attr("transform", 
"translate("+margin.left + "," + margin.top + ")");

d3.csv("https://raw.githubusercontent.com/ydunga/data/main/incometaxthresholds.csv", 
function(d) { 
    return { date: d3.timeParse("%Y")(d.Year), value: d.maximum, value2: d.min}
}, 


function(data) {
    
    var x = d3.scaleTime()
  .domain(d3.extent(data, function(d) { return d.date; }))
  .range([ 0, width ]);
svg5.append("g")
  .attr("transform", "translate(0," + height + ")")
  .call(d3.axisBottom(x));

// Add Y axis
var y = d3.scaleLinear()
  .domain([0, d3.max(data, function(d) { return +d.value + 50000; })])
  .range([ height, 0 ]);
svg5.append("g")
  .call(d3.axisLeft(y));

// Add the line
svg5.append("path")
  .datum(data)
  .attr("fill", "none")
  .attr("stroke", "#8fb339")
  .attr("stroke-width", 3)
  .attr("d", d3.line()
    .x(function(d) { return x(d.date) })
    .y(function(d) { return y(d.value) })
    );

    svg5.append("path")
  .datum(data)
  .attr("fill", "none")
  .attr("stroke", "#fc5130")
  .attr("stroke-width", 3)
  .attr("d", d3.line()
    .x(function(d) { return x(d.date) })
    .y(function(d) { return y(d.value2) })
    );




svg5.append("text")
.text("Income thresholds for minimum and maximum tax rates")
.attr("x", 10)
.attr("y", 0 - (margin.top / 2))
.attr("font-style", "italic");
}

);

var svg6 = d3.select("#container2-2")
.append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height+ margin.top+margin.bottom)
.append("g")
.attr("transform", 
"translate("+margin.left + "," + margin.top + ")");

d3.csv("https://raw.githubusercontent.com/ydunga/data/main/personalincometaxrate.csv", 
function(d) { 
    return { date: d3.timeParse("%Y")(d.Year), value: d.max, value2: d.minimum}
}, 


function(data) {
    
    var x = d3.scaleTime()
  .domain(d3.extent(data, function(d) { return d.date; }))
  .range([ 0, width ]);
svg6.append("g")
  .attr("transform", "translate(0," + height + ")")
  .call(d3.axisBottom(x));

// Add Y axis
var y = d3.scaleLinear()
  .domain([0, d3.max(data, function(d) { return +d.value+10; })])
  .range([ height, 0 ]);
svg6.append("g")
  .call(d3.axisLeft(y));

// Add the line
svg6.append("path")
  .datum(data)
  .attr("fill", "none")
  .attr("stroke", "#8fb339")
  .attr("stroke-width", 3)
  .attr("d", d3.line()
    .x(function(d) { return x(d.date) })
    .y(function(d) { return y(d.value) })
    );

    svg6.append("path")
  .datum(data)
  .attr("fill", "none")
  .attr("stroke", "#fc5130")
  .attr("stroke-width", 3)
  .attr("d", d3.line()
    .x(function(d) { return x(d.date) })
    .y(function(d) { return y(d.value2) })
    );




svg6.append("text")
.text("Minimum and maximum personal income tax rates")
.attr("x", 10)
.attr("y", 0 - (margin.top / 2))
.attr("font-style", "italic");
}

);

var svg7 = d3.select("#dataviz3")
.append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height+ margin.top+margin.bottom)
.append("g")
.attr("transform", 
"translate("+margin.left + "," + margin.top + ")");

d3.csv("https://raw.githubusercontent.com/ydunga/data/main/corporatetaxrate.csv", function(d) {
    return { date: d3.timeParse("%Y")(d.Year), value: d.Corporatetax}
}, 
function(data) {
    var x = d3.scaleTime()
  .domain(d3.extent(data, function(d) { return d.date; }))
  .range([ 0, width ]);
svg7.append("g")
  .attr("transform", "translate(0," + height + ")")
  .call(d3.axisBottom(x));

// Add Y axis
var y = d3.scaleLinear()
  .domain([25, d3.max(data, function(d) { return +d.value + 5; })])
  .range([ height, 0 ]);
svg7.append("g")
  .call(d3.axisLeft(y));

// Add the line
svg7.append("path")
  .datum(data)
  .attr("fill", "none")
  .attr("stroke", "steelblue")
  .attr("stroke-width", 1.5)
  .attr("d", d3.line()
    .x(function(d) { return x(d.date) })
    .y(function(d) { return y(d.value) })
    );
}
);

var svg8 = d3.select("#revdeficit")
.append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height+ margin.top+margin.bottom)
.append("g")
.attr("transform", 
"translate("+margin.left + "," + margin.top + ")");

d3.csv("https://raw.githubusercontent.com/ydunga/data/main/revenuedeficit.csv", function(d) {
    return { date: d3.timeParse("%Y")(d.Year), value: d.Revenuedeficit}
}, 
function(data) {
  console.log(data)
    var x = d3.scaleTime()
  .domain(d3.extent(data, function(d) { return d.date; }))
  .range([ 0, width ]);
svg8.append("g")
  .attr("transform", "translate(0," + 0 + ")")
  .call(d3.axisTop(x));

  
// Add Y axis
var y = d3.scaleLinear()
  .domain([d3.min(data, function(d) { return +d.value; }),0])
  .range([ height, 0 ]);
svg8.append("g")
  .call(d3.axisLeft(y));

  svg8.append("rect")
  .attr("x", 290)
  .attr("y", 0 )
  .attr("height", 400)
  .attr("width", 10)
  .style("fill", "grey")
  .style("opacity", 0.3);

// Add the line
svg8.append("path")
  .datum(data)
  .attr("fill", "none")
  .attr("stroke", "steelblue")
  .attr("stroke-width", 1.5)
  .attr("d", d3.line()
    .x(function(d) { return x(d.date) })
    .y(function(d) { return y(d.value) })
    );

svg8.append("text")
.text("Revenue deficit % GDP")
.attr("x", 100)
.attr("y", 450)
.attr("font-style", "italic");

}
);




</script>
</body>
</html>
